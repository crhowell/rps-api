(this.webpackJsonprps_frontend=this.webpackJsonprps_frontend||[]).push([[0],{65:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(25),r=n.n(a),o=(n(65),n(8)),i=n(17),j=n(7),l=n(33),h=n(53),d=Object(c.createContext)();function u(){return Object(c.useContext)(d)}var b=n(1),O=function(e){var t=e.component,n=Object(h.a)(e,["component"]),c=u().authTokens;return Object(b.jsx)(j.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return c?Object(b.jsx)(t,Object(l.a)({},e)):Object(b.jsx)(j.a,{to:"/login"})}}))},x=n(39),p=n.n(x),m="/api",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=sessionStorage.getItem("auth");return e?null!==t?JSON.parse(t)[e]:"":null!==t?JSON.parse(t):null},f=p.a.create({baseURL:m,timeout:3e3,headers:{"Content-Type":"application/json",accept:"application/json"}}),v=p.a.create({baseURL:m,timeout:3e3,headers:{Authorization:"JWT "+g("token"),"Content-Type":"application/json",accept:"application/json"}});v.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(401===e.response.status&&"Unauthorized"===e.response.statusText){var n=g(),c=n.token,s=n.orig_iat;return v.post("/user/refresh-token",{token:c,orig_iat:s}).then((function(e){return sessionStorage.setItem("auth",JSON.stringify(e.data)),v.defaults.headers.Authorization="JWT "+e.data.token,t.headers.Authorization="JWT "+e.data.token,v(t)})).catch((function(e){console.log(e),sessionStorage.removeItem("auth")}))}return Promise.reject(e)}));var y,k,S,w,_,I,T=n(11),L=n(54),P=function(e){var t=Object(c.useState)({}),n=Object(o.a)(t,2),s=n[0],a=n[1];return Object(c.useEffect)((function(){v.get("/games").then((function(e){a(e.data)})).catch((function(e){console.log("Home ERROR: ",e)}))}),[]),Object(b.jsxs)("div",{className:"container leaderboard my-2",children:[Object(b.jsx)(L.a,{className:"col-md-2 mx-auto",variant:"primary",onClick:function(t){return e.history.push("/play")},children:"Play"}),Object(b.jsx)("h2",{children:"Overall"}),Object(b.jsxs)(T.a,{children:[Object(b.jsxs)(T.a.Item,{children:["Total Games Played: ",s.games_played]}),Object(b.jsxs)(T.a.Item,{children:["Total Ties: ",s.ties]}),Object(b.jsxs)(T.a.Item,{children:["Total Ties: ",s.unique_players]})]}),Object(b.jsx)("h2",{children:"Humans"}),Object(b.jsxs)(T.a,{children:[Object(b.jsxs)(T.a.Item,{children:["Wins: ",s.human_wins]}),Object(b.jsxs)(T.a.Item,{children:["Losses: ",s.human_losses]}),Object(b.jsxs)(T.a.Item,{children:["Rock Plays: ",s.humans_played_rock]}),Object(b.jsxs)(T.a.Item,{children:["Paper Plays: ",s.humans_played_paper]}),Object(b.jsxs)(T.a.Item,{children:["Scissor Plays: ",s.humans_played_scissors]})]}),Object(b.jsx)("h2",{children:"Bots"}),Object(b.jsxs)(T.a,{children:[Object(b.jsxs)(T.a.Item,{children:["Wins: ",s.bot_wins]}),Object(b.jsxs)(T.a.Item,{children:["Losses: ",s.bot_losses]})]})]})},C=n(20),R=n(21),N=R.a.div(y||(y=Object(C.a)(["\n  box-sizing: border-box;\n  max-width: 410px;\n  margin: 0 auto;\n  padding: 0 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),J=R.a.div(k||(k=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]))),B=R.a.input(S||(S=Object(C.a)(["\n  padding: 1rem;\n  border: 1px solid #999;\n  margin-bottom: 1rem;\n  font-size: 0.8rem;\n"]))),E=R.a.button(w||(w=Object(C.a)(["\n  background: linear-gradient(to bottom, #3096b0, #478696);\n  border-color: #284a52;\n  border-radius: 3px;\n  padding: 1rem;\n  color: white;\n  font-weight: 700;\n  width: 100%;\n  margin-bottom: 1rem;\n  font-size: 0.8rem;\n"]))),W=(R.a.img(_||(_=Object(C.a)(["\n  width: 50%;\n  margin-bottom: 1rem;\n"]))),R.a.div(I||(I=Object(C.a)(["\n  background-color: red;\n"])))),z=n(22),A=new Set(["P","R","S"]),F={R:"Rock",P:"Paper",S:"Scissors"},G=function(e){var t=Object(c.useState)({}),n=Object(o.a)(t,2),s=n[0],a=n[1],r=function(e){A.has(e)&&v.post("/games",{player_choice:e}).then((function(e){a(e.data)})).catch((function(e){console.log("Error: ",e)}))};return Object(b.jsx)("div",{className:"text-center",children:0!==Object.keys(s).length?Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Round Results"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("h4",{children:["You chose: ",F[s.player_choice]]}),Object(b.jsxs)("h4",{children:["Bot chose: ",F[s.bot_choice]]}),null===s.player_has_won?Object(b.jsx)("h2",{class:"display-2",children:"You tied!"}):Object(b.jsx)("h2",{class:"display-2",children:s.player_has_won?"You won!":"You lose!"}),Object(b.jsx)("hr",{}),Object(b.jsx)(E,{variant:"info",onClick:function(e){a({})},children:"Play again?"})]}):Object(b.jsxs)("div",{className:"row justify-content-md-center",children:[Object(b.jsx)("h1",{class:"display-1",children:"New Game"}),Object(b.jsx)("hr",{}),Object(b.jsx)("h4",{children:"Make your choice!"}),Object(b.jsx)(z.a,{className:"col-md-4",style:{width:"18rem"},children:Object(b.jsx)(z.a.Body,{children:Object(b.jsx)(E,{variant:"primary",onClick:function(e){return r("R")},children:"Rock"})})}),Object(b.jsx)(z.a,{className:"col-md-4",style:{width:"18rem"},children:Object(b.jsx)(z.a.Body,{children:Object(b.jsx)(E,{variant:"primary",onClick:function(e){return r("P")},children:"Paper"})})}),Object(b.jsx)(z.a,{className:"col-md-4",style:{width:"18rem"},children:Object(b.jsx)(z.a.Body,{children:Object(b.jsx)(E,{variant:"primary",onClick:function(e){return r("S")},children:"Scissors"})})})]})})},U=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),j=Object(o.a)(r,2),l=j[0],h=j[1],d=Object(c.useState)(""),O=Object(o.a)(d,2),x=O[0],p=O[1],m=u().setAuthTokens;return Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("h1",{children:"Log in"}),Object(b.jsxs)(N,{children:[s&&Object(b.jsx)(W,{children:"The username or password provided were incorrect!"}),Object(b.jsx)("br",{}),Object(b.jsxs)(J,{children:[Object(b.jsx)(B,{type:"username",value:l,onChange:function(e){return h(e.target.value)},placeholder:"username"}),Object(b.jsx)(B,{type:"password",value:x,onChange:function(e){return p(e.target.value)},placeholder:"password"}),Object(b.jsx)(E,{onClick:function(){f.post("/user/token",{username:l,password:x}).then((function(t){200===t.status?(m(t.data),e.history.push("/")):a(!0)})).catch((function(e){a(!0)}))},children:"Sign In"})]}),Object(b.jsx)(i.b,{to:"/signup",children:"Don't have an account?"})]})]})},Y=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(o.a)(a,2),l=r[0],h=r[1],d=Object(c.useState)(""),u=Object(o.a)(d,2),O=u[0],x=u[1],p=Object(c.useState)(!1),m=Object(o.a)(p,2),g=m[0],v=m[1];return g?Object(b.jsx)(j.a,{to:"/login"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"text-center",children:"Sign up"}),Object(b.jsxs)(N,{children:[Object(b.jsxs)(J,{children:[Object(b.jsx)(B,{type:"text",value:n,onChange:function(e){return s(e.target.value)},placeholder:"username"}),Object(b.jsx)(B,{type:"password",name:"password",value:l,onChange:function(e){return h(e.target.value)},placeholder:"password"}),Object(b.jsx)(B,{type:"password",name:"password2",value:O,onChange:function(e){return x(e.target.value)},placeholder:"password confirm"}),Object(b.jsx)(E,{type:"submit",onClick:function(e){f.post("/user",{username:n,password:l,password2:O}).then((function(e){201===e.status?v(!0):console.log(e.status)})).catch((function(e){console.log(e)}))},children:"Sign Up"})]}),Object(b.jsx)(i.b,{to:"/login",children:"Already have an account?"})]})]})},D=function(e){var t=Object(c.useState)({}),n=Object(o.a)(t,2),s=n[0],a=n[1];Object(c.useEffect)((function(){v.get("/user/profile").then((function(e){console.log("PROFILE: ",e.data),a(e.data)})).catch((function(e){console.log("PROFILE ERROR: ",e)}))}),[]);return Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsxs)("h2",{children:[s.username," stats"]}),Object(b.jsx)("hr",{}),Object(b.jsx)("h4",{children:"Win Percentage"}),s.total_games?Object(b.jsxs)("p",{children:[((s.total_wins+.5*s.total_ties)/s.total_games*100).toFixed(2),"%"]}):Object(b.jsx)("p",{children:"N / A"}),Object(b.jsx)("h4",{children:"Total Wins"}),Object(b.jsx)("p",{children:s.total_wins}),Object(b.jsx)("h4",{children:"Total Losses"}),Object(b.jsx)("p",{children:s.total_losses}),Object(b.jsx)("h4",{children:"Total Ties"}),Object(b.jsx)("p",{children:s.total_ties})]})},H=n(97),M=(n(52),n(98)),q=n(99),K=function(e){var t=u(),n=t.authTokens,c=t.isLoggedIn,s=n?n.user:"";return Object(b.jsx)(M.a,{bg:"dark",variant:"dark",children:Object(b.jsxs)(H.a,{children:[Object(b.jsx)(M.a.Brand,{children:"RPS Game"}),c&&Object(b.jsx)(q.a,{className:"mr-auto",children:Object(b.jsx)(q.a.Link,{href:"/",children:"Game Stats"})}),c?Object(b.jsxs)(q.a,{children:[Object(b.jsxs)(q.a.Link,{children:["Welcome, ",s]}),Object(b.jsx)(q.a.Item,{children:" | "}),Object(b.jsx)(q.a.Link,{href:"/profile",children:"Profile"}),Object(b.jsx)(q.a.Link,{onClick:e.logOut,children:"Logout"})]}):Object(b.jsxs)(q.a,{children:[Object(b.jsx)(q.a.Link,{href:"/signup",children:"Sign up"}),Object(b.jsx)(q.a.Link,{href:"/login",children:"Login"})]})]})})},Q=function(e){var t=JSON.parse(sessionStorage.getItem("auth")),n=Object(c.useState)(t),s=Object(o.a)(n,2),a=s[0],r=s[1],l=Object(c.useState)(null!==t),h=Object(o.a)(l,2),u=h[0],x=h[1];return Object(b.jsx)(d.Provider,{value:{authTokens:a,setAuthTokens:function(e){sessionStorage.setItem("auth",JSON.stringify(e)),r(e),x(!0)},isLoggedIn:u,setIsLoggedIn:x},children:Object(b.jsxs)(i.a,{children:[Object(b.jsx)(K,{logOut:function(e){sessionStorage.removeItem("auth"),r(),x(!1)}}),Object(b.jsxs)(H.a,{children:[Object(b.jsx)(O,{exact:!0,path:"/",component:P}),Object(b.jsx)(O,{exact:!0,path:"/play",component:G}),Object(b.jsx)(O,{exact:!0,path:"/profile",component:D}),Object(b.jsx)(j.b,{exact:!0,path:"/login",component:U}),Object(b.jsx)(j.b,{exact:!0,path:"/signup",component:Y})]})]})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(Q,{})}),document.getElementById("root")),V()}},[[95,1,2]]]);
//# sourceMappingURL=main.77a6e032.chunk.js.map